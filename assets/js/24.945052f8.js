(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{226:function(s,t,a){"use strict";a.r(t);var e=a(0),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_09，远程相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_09，远程相关"}},[s._v("#")]),s._v(" 09，远程相关")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[s._v("git remote 官方参考"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"_1，查看关联的远程仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1，查看关联的远程仓库"}},[s._v("#")]),s._v(" 1，查看关联的远程仓库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_2，关联远程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2，关联远程"}},[s._v("#")]),s._v(" 2，关联远程")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("remote-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("<remote-name>")]),s._v(" 默认值是 "),a("code",[s._v("origin")]),s._v("。")]),s._v(" "),a("p",[a("code",[s._v("<remote-name>")]),s._v(" 是为了方便引用，代替整个 "),a("code",[s._v("<url>")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"_3，重命名-shortname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3，重命名-shortname"}},[s._v("#")]),s._v(" 3，重命名 "),a("code",[s._v("<shortname>")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rename")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("old-remote-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("new-remote-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_4，删除远程仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4，删除远程仓库"}},[s._v("#")]),s._v(" 4，删除远程仓库")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("remote-name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_5，推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5，推送"}},[s._v("#")]),s._v(" 5，推送")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n// push 所有分支\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote-name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" --all\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[s._v("当使用 "),a("code",[s._v("git push")]),s._v(" 时，其实省略了后面2个参数，其默认值是 "),a("code",[s._v("origin")]),s._v(" 和当前分支。")])]),s._v(" "),a("h2",{attrs:{id:"_6，note-about-fast-forwards"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6，note-about-fast-forwards"}},[s._v("#")]),s._v(" 6，note about fast-forwards")]),s._v(" "),a("p",[s._v("出现的条件：")]),s._v(" "),a("ul",[a("li",[s._v("本地和远程的 commit 没有共同的祖先。")]),s._v(" "),a("li",[s._v("如果有，本地和远程的最新 commit 都不是基于对方产生的。")])]),s._v(" "),a("p",[s._v("如果是 note about fast-forwards，同分支不允许做 push 操作。")]),s._v(" "),a("h3",{attrs:{id:"_6-1，第1种情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1，第1种情况"}},[s._v("#")]),s._v(" 6.1，第1种情况")]),s._v(" "),a("p",[s._v("当本地刚关联了远程仓库后，执行 "),a("code",[s._v("git push")]),s._v(" 操作时，就会出现以下提示，")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push gitlab master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212234020.png",alt:"git09-1"}})]),s._v(" "),a("p",[s._v("下面通过版本树来说明这个问题，")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("gitk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("本地未拉取远程分支内容时的版本树，")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212234135.png",alt:"git09-2"}})]),s._v(" "),a("p",[s._v("当执行 "),a("code",[s._v("git fetch gitlab master")]),s._v(" 后，本地的版本树，")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212234157.png",alt:"git09-3"}})]),s._v(" "),a("p",[s._v("可以看到出现了一个独立的树，而正因为这2个树是独立的，满足了第一种情况。")]),s._v(" "),a("p",[a("strong",[s._v("解决")])]),s._v(" "),a("p",[s._v("有 2 种方式")]),s._v(" "),a("ul",[a("li",[s._v("rebase，"),a("code",[s._v("git pull --rebase")]),s._v("（版本树会变为一条直线）")]),s._v(" "),a("li",[s._v("merge")])]),s._v(" "),a("p",[s._v("使用 merge 的方式：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212235652.png",alt:"git09-4"}})]),s._v(" "),a("p",[s._v("看到 merge 被拒绝了，使用帮助命令后，看到有如下的配置参数：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212235712.png",alt:"git09-5"}})]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge --allow-unrelated-histories gitlab/master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行上面的命令后，会弹出的编辑框，让填写为何要进行 merge，直接默认即可。")]),s._v(" "),a("p",[s._v("再次查看版本树，可以看到最新生成的这个 commit，有2个父亲，")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212235823.png",alt:"git09-6"}})]),s._v(" "),a("blockquote",[a("p",[s._v("下图是 "),a("code",[s._v("gitk")]),s._v(" 后左下角的内容，")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191212235929.png",alt:"git09-7"}})]),s._v(" "),a("p",[s._v("此时，本地最新的 commit 就是远程分支最新 commit 的子级，满足条件。所以 push 就不会有问题了。")]),s._v(" "),a("h3",{attrs:{id:"_6-2，第2种情况"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2，第2种情况"}},[s._v("#")]),s._v(" 6.2，第2种情况")]),s._v(" "),a("p",[s._v("这种情况最常见。")]),s._v(" "),a("p",[s._v("当本地提交了几个 commit 之后，如果远程分支未做改动，那本地分支最新 commit 就是基于远程最新的 commit 产生的，本地可以直接 "),a("code",[s._v("push")]),s._v(" 提交。")]),s._v(" "),a("p",[s._v("而如果是多人协作开发，其他人已经向远程分支提交了 commit 后，本地就会比远程少几个 commit。\n因为本地原本就是拉取远程分支进行的开发，其他人也是一样。所以虽然其他人提交了 commit 到远程后，本地和远程最新的 commit 还是有共同的祖先（远程仓库最原始的 commit）。")]),s._v(" "),a("p",[a("strong",[s._v("但是，本地和远程的最新 commit 都不是基于对方产生的，满足了第2种情况。")])]),s._v(" "),a("p",[s._v("如下图示，对同一个 commit（最下面的蓝色），本地做了修改再次 commit 了（左侧蓝色），另一个人也做了同样的操作，并且先一步 push，产生了另一个新的 commit（右侧蓝色），")]),s._v(" "),a("p",[s._v("因为他们2个之间，虽然有共同的祖先，"),a("strong",[s._v("但不是基于对方产生的")]),s._v("。")]),s._v(" "),a("p",[s._v("当本地通过 merge 后，产生的新 commit 的其中一个父亲就是远程分支的 commit，所以本地可以进行 push 的操作了。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://crane0.oss-cn-beijing.aliyuncs.com/blogMarkdown/git20191213004740.png",alt:"git09-8"}})]),s._v(" "),a("h3",{attrs:{id:"_6-3，恢复到-merge-前"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3，恢复到-merge-前"}},[s._v("#")]),s._v(" 6.3，恢复到 merge 前")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge --abort\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);